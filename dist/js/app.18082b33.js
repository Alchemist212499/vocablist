(function(){"use strict";var e={2198:function(e,t,n){var o=n(5130),a=n(6768),c=n(4232),r=n(144),l=n(595);const u=(0,l.A)();var s=u,i={__name:"Vocab",setup(e){let t=(0,r.KR)("vocabNewWord"),n=(0,r.KR)("vocabDef"),l=(0,r.KR)("vocabNotes"),u=(0,r.KR)(!1),i=((0,r.KR)(null),(0,a.EW)({get(){return{vocabNewWord:t,vocabDef:n,vocabNotes:l}},set(e){t.value=e.newWord,n.value=e.def,l.value=e.notes}}));function v(){!0===u.value?u.value=!1:u.value=!0}return s.on("next-vocab",(({curVocab:e})=>{i.value=e})),s.on("prev-vocab",(({curVocab:e})=>{i.value=e})),s.on("relocate-chapter",(({curVocab:e})=>{i.value=e})),window.addEventListener("keydown",(e=>{"ArrowUp"===e.code?u.value=!0:"ArrowDown"===e.code&&(u.value=!1)})),(e,l)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",{class:(0,c.C4)(["text-center","vocab",{unveil:!0===(0,r.R1)(u)},{veil:!1===(0,r.R1)(u)}]),onClick:(0,o.D$)(v,["prevent"])},[(0,a.Lk)("h1",null,(0,c.v_)((0,r.R1)(t)),1)],2),(0,a.Lk)("div",{class:(0,c.C4)(["text-center","vocab",{show:!0===(0,r.R1)(u)},{hide:!1===(0,r.R1)(u)}]),onClick:(0,o.D$)(v,["prevent"])},[(0,a.Lk)("h2",null,(0,c.v_)((0,r.R1)(n)),1)],2)],64))}},v=n(1241);const p=(0,v.A)(i,[["__scopeId","data-v-b10646a8"]]);var h=p;const f=e=>((0,a.Qi)("data-v-aa8f4b28"),e=e(),(0,a.jt)(),e),d={class:"btn btn-outline-light border-0 pe-5 ps-5",type:"button ","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasWithBothOptions","aria-controls":"offcanvasWithBothOptions"},b={class:"offcanvas offcanvas-start","data-bs-scroll":"true",tabindex:"-1",id:"offcanvasWithBothOptions","aria-labelledby":"offcanvasWithBothOptionsLabel"},g=f((()=>(0,a.Lk)("div",{class:"offcanvas-header"},[(0,a.Lk)("h5",{class:"offcanvas-title",id:"offcanvasWithBothOptionsLabel"}," Vocab Menu "),(0,a.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1))),C={class:"offcanvas-body"},k={class:"list-group"},m=["onClick"];var w={__name:"Chapter",setup(e){let t=(0,r.KR)("chpSeq"),n=(0,r.KR)("chpTitle"),l=(0,r.KR)(0),u=(0,r.KR)([]);const i=(0,a.WQ)("$vocabs");let v=(0,a.EW)({get(){return{chpSeq:t,chpTitle:n}},set(e){t.value=e.seq,n.value=e.title}});function p(e){s.emit("relocate-chapter",i.goToChapter(e))}return s.on("next-vocab",(({curChp:e,curChpIndex:t})=>{v.value=e,l.value=t})),s.on("prev-vocab",(({curChp:e,curChpIndex:t})=>{v.value=e,l.value=t})),s.on("file-loaded",(e=>{u.value=e})),s.on("relocate-chapter",(({curChp:e,curChpIndex:t})=>{v.value=e,l.value=t})),(e,s)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",d,(0,c.v_)((0,r.R1)(t))+" : "+(0,c.v_)((0,r.R1)(n)),1),(0,a.Lk)("div",b,[g,(0,a.Lk)("div",C,[(0,a.Lk)("div",k,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,r.R1)(u),((e,t)=>((0,a.uX)(),(0,a.CE)("button",{type:"button",class:(0,c.C4)(["list-group-item","list-group-item-action",{active:t===(0,r.R1)(l)}]),onClick:(0,o.D$)((e=>p(t)),["prevent"]),key:t},(0,c.v_)(e.seq)+" : "+(0,c.v_)(e.title),11,m)))),128))])])])],64))}};const V=(0,v.A)(w,[["__scopeId","data-v-aa8f4b28"]]);var L=V,x=n(3230),y=n(8344);const _="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",R="text/csv";var O={__name:"File",setup(e){const t=(0,a.WQ)("$vocabs");let n=(0,r.KR)(null),c=(0,r.KR)("");function l(){n.value.click()}async function u(e){let n;const o=e.target.files[0],a=o.type;switch(c.value=o.name,console.log(`${c.value} loaded`),a){case _:n=await v(o);break;case R:n=await i(o);break;default:console.error("file process error");break}console.log(n);const r=t.createVocabVault(n);console.log(r),s.emit("file-loaded",t.getAllChapters()),s.emit("relocate-chapter",t.goToChapter(0))}async function i(e){return new Promise((t=>{(0,y.parse)(e,{header:!0,download:!0,dynamicTyping:!0,complete:function(e){t(e.data)}})}))}async function v(e){const t=await e.arrayBuffer(),n=(0,x.LF)(t),o=n.Sheets[n.SheetNames[1]],a=x.Wp.sheet_to_json(o);return a}return(e,t)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("button",{class:"btn btn-outline-light border-0",onClick:(0,o.D$)(l,["prevent"])}," Select File "),(0,a.Lk)("input",{type:"file",accept:".csv, .xlsx",class:"d-none",ref_key:"fileInput",ref:n,onChange:u},null,544)],64))}};const K=O;var W=K;const $={class:"navbar bg-black"},E={class:"container-fluid"},F=(0,a.Lk)("span",{class:"navbar-brand m-0 h1 text-white"},"VOCABLIST",-1);var A={__name:"Navbar",setup(e){return(e,t)=>((0,a.uX)(),(0,a.CE)("nav",$,[(0,a.Lk)("div",E,[F,(0,a.bF)(L),(0,a.bF)(W)])]))}};const I=A;var T=I;const j={class:"vh-100 overflow-hidden"},q={class:"h-25"},N=(0,a.Lk)("div",{class:"h-100"},null,-1),B={class:"d-flex h-75"},D={class:"col-12"},X={class:"h-50 justify-content-center d-flex flex-column"},P=(0,a.Lk)("div",{class:"h-50"},null,-1);var S={__name:"App",setup(e){const t=(0,a.WQ)("$vocabs");function n(){let{curChp:e,curVocab:n}=t.getPrevVocab();s.emit("prev-vocab",{curChp:e,curVocab:n})}function o(){let{curChp:e,curVocab:n}=t.getNextVocab();s.emit("next-vocab",{curChp:e,curVocab:n})}return window.addEventListener("keydown",(e=>{"ArrowLeft"===e.code?n():"ArrowRight"===e.code&&o()})),(e,t)=>((0,a.uX)(),(0,a.CE)("div",j,[(0,a.Lk)("div",q,[(0,a.bF)(T),N]),(0,a.Lk)("div",B,[(0,a.Lk)("div",D,[(0,a.Lk)("div",X,[(0,a.bF)(h)]),P])])]))}};const Q=S;var M=Q;n(9953),n(4114);let U=[],z=[],G=0,H=0;var J={goToChapter(e){G=e,H=0;let t=U[G].chp,n=U[G].chpVault[H];return{curChp:t,curChpIndex:G,curVocab:n}},getAllChapters(){const e=[];return U.length&&U.forEach((t=>{e.push(t.chp)})),e},getPrevVocab(){U.length&&(0===H?(G--,H=U[G].chpVault.length-1):H--);let e=U.length?U[G].chp:"untitled",t=U.length?U[G].chpVault[H]:"untitled";return console.log(`curChp[${G}]`,U[G].chp),console.log(`curVocab[${G}][${H}]`,U[G].chpVault[H]),{curChp:e,curChpIndex:G,curVocab:t}},getNextVocab(){U.length&&(H===U[G].chpVault.length-1?(G++,H=0):H++);let e=U.length?U[G].chp:"untitled",t=U.length?U[G].chpVault[H]:"untitled";return console.log(`curChp[${G}]`,U[G].chp),console.log(`curVocab[${G}][${H}]`,U[G].chpVault[H]),{curChp:e,curChpIndex:G,curVocab:t}},createVocabVault(e){G=0,H=0,z=e;let t,n=[];for(const c of z){const e=c?.原文??null,o=c.生词,a=c.解释,r=c?.备注??null;if(null!==e){if(U.length||n.length){const{seq:e,title:o}=Y(t);U.push({chp:{seq:e,title:o},chpVault:n}),n=[]}t=e}n.push({newWord:o,def:a,notes:r})}const{seq:o,title:a}=Y(t);return U.push({chp:{seq:o,title:a},chpVault:n}),console.log("vocab vault length:",U.length),U}};function Y(e){const t=/(TPO \d+-\d+)/,n=e.match(t)[0],o=e.split(n)[1].replace(/[\r\n]/g,"");return{seq:n.trim(),title:o.trim()}}const Z=(0,o.Ef)(M);Z.provide("$vocabs",J),Z.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var c=t[o]={exports:{}};return e[o].call(c.exports,c,c.exports,n),c.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,c){if(!o){var r=1/0;for(i=0;i<e.length;i++){o=e[i][0],a=e[i][1],c=e[i][2];for(var l=!0,u=0;u<o.length;u++)(!1&c||r>=c)&&Object.keys(n.O).every((function(e){return n.O[e](o[u])}))?o.splice(u--,1):(l=!1,c<r&&(r=c));if(l){e.splice(i--,1);var s=a();void 0!==s&&(t=s)}}return t}c=c||0;for(var i=e.length;i>0&&e[i-1][2]>c;i--)e[i]=e[i-1];e[i]=[o,a,c]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,c,r=o[0],l=o[1],u=o[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(u)var i=u(n)}for(t&&t(o);s<r.length;s++)c=r[s],n.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return n.O(i)},o=self["webpackChunkvocablist"]=self["webpackChunkvocablist"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(2198)}));o=n.O(o)})();
//# sourceMappingURL=app.18082b33.js.map